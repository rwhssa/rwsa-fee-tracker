@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    * {
        @apply border-gray-200;
    }

    body {
        @apply bg-gray-950 text-white;
        font-feature-settings:
            "rlig" 1,
            "calt" 1;
    }

    html {
        scroll-behavior: smooth;
    }
}

@layer components {
    /* Glass morphism effect */
    .glass {
        @apply backdrop-blur-xl bg-white/10 border border-white/20;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
    }

    .glass-dark {
        @apply backdrop-blur-xl bg-black/20 border border-white/10;
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
    }

    /* Modern card design */
    .card {
        @apply bg-gray-900/80 rounded-2xl p-6 border border-gray-800/50;
        background: linear-gradient(
            135deg,
            rgba(55, 65, 81, 0.15) 0%,
            rgba(17, 24, 39, 0.8) 100%
        );
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        transform: translateZ(0);
        will-change: auto;
    }

    .card:hover {
        @apply border-gray-700/70;
        transition: border-color 0.2s ease;
    }

    /* Mobile-specific card optimizations */
    @media (max-width: 768px) {
        .card {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .card:active {
            @apply border-gray-700/80;
            transform: translateZ(0) scale(0.98);
            transition: all 0.1s ease;
        }
    }

    /* Modern button styles */
    .btn-primary {
        @apply bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800
           text-white font-medium py-3 px-6 rounded-xl transition-colors duration-150
           shadow-lg;
        transform: translateZ(0);
        min-height: 44px;
        min-width: 44px;
    }

    .btn-secondary {
        @apply bg-gray-800/60 hover:bg-gray-700/60 text-white font-medium py-3 px-6
           rounded-xl transition-colors duration-150 border border-gray-700/50
           hover:border-gray-600/50;
        transform: translateZ(0);
        min-height: 44px;
        min-width: 44px;
    }

    .btn-ghost {
        @apply bg-transparent hover:bg-white/5 text-gray-300 hover:text-white
           font-medium py-3 px-6 rounded-xl transition-colors duration-150
           border border-transparent hover:border-white/10;
        transform: translateZ(0);
        min-height: 44px;
        min-width: 44px;
    }

    /* Mobile button optimizations */
    @media (max-width: 768px) {
        .btn-primary:active,
        .btn-secondary:active,
        .btn-ghost:active {
            transform: translateZ(0) scale(0.95);
            transition: transform 0.1s ease;
        }

        .btn-secondary,
        .btn-ghost {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }
    }

    /* Input styles */
    .input {
        @apply bg-gray-900/50 border border-gray-700/50 rounded-xl px-4 py-3
           text-white placeholder-gray-400 focus:outline-none focus:ring-2
           focus:ring-blue-500/50 focus:border-blue-500/50 transition-colors duration-150;
        transform: translateZ(0);
        min-height: 44px;
    }

    /* Mobile input optimizations */
    @media (max-width: 768px) {
        .input {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            font-size: 16px; /* Prevents zoom on iOS */
        }
    }

    /* Navigation styles */
    .nav-item {
        @apply flex items-center justify-center py-3 px-4 rounded-2xl
           relative border border-transparent;
        transition: all 0.2s ease;
        transform: translateZ(0);
        min-height: 48px;
        min-width: 48px;
    }

    .nav-item.active {
        @apply bg-gradient-to-r from-blue-600/20 to-blue-700/20
           text-blue-400 border-blue-500/30;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
    }

    .nav-item:not(.active) {
        @apply text-gray-400 hover:text-white hover:bg-white/5
           hover:border-white/10;
    }

    /* Mobile navigation optimizations */
    @media (max-width: 768px) {
        .nav-item:active {
            transform: translateZ(0) scale(0.9);
            transition: transform 0.1s ease;
        }
    }

    /* Bottom navigation bar container */
    .bottom-nav {
        @apply bg-gray-900/90 rounded-3xl p-2
           border border-gray-700/50 shadow-lg;
        background: linear-gradient(
            135deg,
            rgba(17, 24, 39, 0.95) 0%,
            rgba(31, 41, 55, 0.9) 100%
        );
        transform: translateZ(0);
    }

    /* Mobile bottom nav optimizations */
    @media (max-width: 768px) {
        .bottom-nav {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.15);
        }
    }

    /* Avatar styles */
    .avatar {
        @apply w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500
           flex items-center justify-center text-white font-medium text-lg;
    }

    /* Status indicators */
    .status-paid {
        @apply bg-green-800 text-green-200;
    }

    .status-unpaid {
        @apply bg-red-800 text-red-200;
    }

    .status-exempt {
        @apply bg-yellow-800 text-yellow-200;
    }

    /* Loading animation */
    .loading-spinner {
        @apply animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500;
        will-change: transform;
    }

    /* Fade in animation */
    .fade-in {
        @apply animate-fade-in;
        will-change: opacity;
    }

    .slide-up {
        @apply animate-slide-up;
        will-change: transform, opacity;
    }

    .scale-in {
        @apply animate-scale-in;
        will-change: transform, opacity;
    }

    /* Table styles */
    .table-container {
        @apply bg-gray-900/40 rounded-t-2xl border border-gray-800/50;
        background: linear-gradient(
            135deg,
            rgba(55, 65, 81, 0.1) 0%,
            rgba(17, 24, 39, 0.6) 100%
        );
        transform: translateZ(0);
        -webkit-overflow-scrolling: touch;
    }

    .table-header {
        @apply bg-gray-900/90;
        background: linear-gradient(
            135deg,
            rgba(17, 24, 39, 0.95) 0%,
            rgba(31, 41, 55, 0.9) 100%
        );
    }

    .table-row {
        @apply transition-colors duration-150;
        transform: translateZ(0);
    }

    .table-row:hover {
        @apply bg-gray-800/30;
    }

    /* Mobile table optimizations */
    @media (max-width: 768px) {
        .table-container {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }

        .table-header {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }

        .table-row:active {
            @apply bg-gray-800/40;
            transition: background-color 0.1s ease;
        }
    }

    .table-cell {
        @apply px-3 py-3 text-sm;
    }

    .filter-dropdown {
        @apply absolute bg-gray-800/95 border border-gray-700 rounded-lg shadow-xl py-1 min-w-32 z-40 backdrop-blur-sm;
        background: linear-gradient(
            135deg,
            rgba(31, 41, 55, 0.95) 0%,
            rgba(17, 24, 39, 0.9) 100%
        );
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    .filter-option {
        @apply block w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-gray-700/50 hover:text-white transition-colors duration-150;
    }

    /* Smooth transitions for better performance */
    .smooth-transition {
        transition:
            transform 0.2s ease,
            opacity 0.2s ease;
        will-change: auto;
        transform: translateZ(0);
    }

    /* Prevent layout shifts */
    .prevent-flicker {
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
    }

    /* Mobile performance optimizations */
    @media (max-width: 768px) {
        * {
            -webkit-tap-highlight-color: rgba(59, 130, 246, 0.1);
            -webkit-touch-callout: none;
        }

        body {
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        /* Reduce backdrop-blur usage on mobile */
        .backdrop-blur-xl,
        .backdrop-blur-lg,
        .backdrop-blur-md {
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }

        .backdrop-blur-sm {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }
    }
}

@layer utilities {
    /* Text gradient */
    .text-gradient {
        @apply bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent;
    }

    /* Scrollbar styles */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Custom scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
        width: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        @apply bg-gray-600/30 rounded-full;
        transition: background-color 0.2s ease;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        @apply bg-gray-500/50;
    }

    /* Safe area padding for mobile */
    .safe-area-bottom {
        padding-bottom: env(safe-area-inset-bottom);
    }

    .safe-area-top {
        padding-top: env(safe-area-inset-top);
    }
}

/* Mobile-first PWA design */
.container {
    @apply px-4;
    transform: translateZ(0);
}

/* Mobile scrolling optimizations */
@media (max-width: 768px) {
    html {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
    }

    body {
        overscroll-behavior: contain;
        -webkit-overflow-scrolling: touch;
        touch-action: manipulation;
    }

    /* Optimize main content scrolling */
    main {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
        will-change: scroll-position;
        scroll-behavior: smooth;
    }

    /* Optimize scrolling for all scrollable containers */
    .overflow-auto,
    .overflow-x-auto,
    .overflow-y-auto {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
    }
}
/* Mobile table optimizations */
.table-cell {
    @apply px-3 py-3 text-sm;
    transform: translateZ(0);
}

/* Special padding for class column */
.table-cell-class {
    @apply py-3 pl-4 pr-3 text-sm;
    transform: translateZ(0);
}

.table-header .table-cell {
    @apply text-sm font-medium;
}

/* Table container with internal scroll */
.table-container {
    @apply overflow-auto;
    -webkit-overflow-scrolling: touch;
    max-height: 60vh;
    transform: translateZ(0);
    will-change: scroll-position;
}

table {
    @apply w-full;
    transform: translateZ(0);
}

/* Checkbox styling for batch mode */
input[type="checkbox"] {
    @apply bg-gray-700 border-gray-600 text-gray-400 focus:ring-gray-500 focus:ring-2;
}

input[type="checkbox"]:checked {
    @apply bg-gray-600 border-gray-500 text-white;
}

/* Filter dropdowns for mobile */
.filter-dropdown {
    @apply text-sm min-w-32;
    transform: translateZ(0);
}

/* Batch operation styles */
.batch-toolbar {
    @apply bg-gray-900/95 border border-gray-800/50 border-b-0;
    background: linear-gradient(
        135deg,
        rgba(17, 24, 39, 0.95) 0%,
        rgba(31, 41, 55, 0.9) 100%
    );
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transform: translateZ(0);
}

/* Mobile batch toolbar optimizations */
@media (max-width: 768px) {
    .batch-toolbar {
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
    }
}

.batch-toolbar + div table {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}

.batch-button {
    @apply flex items-center justify-center space-x-1 px-3 py-2 rounded-lg text-sm
           transition-all duration-200 font-medium;
    min-width: 44px; /* Minimum touch target size */
    min-height: 44px;
}

.batch-button:hover {
    @apply transform scale-105;
}

.batch-button.primary {
    @apply bg-blue-600/20 hover:bg-blue-600/30 text-blue-400;
}

.batch-button.danger {
    @apply bg-red-600/20 hover:bg-red-600/30 text-red-400;
}

.batch-button.secondary {
    @apply bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white;
}

.batch-button:disabled {
    @apply opacity-50 cursor-not-allowed transform-none;
}

/* Batch selection row highlight */
.table-row.selected {
    @apply bg-blue-900/20 border-blue-700/30;
}

/* Mobile-specific batch operation adjustments */
@media (max-width: 640px) {
    .batch-button span {
        @apply hidden;
    }

    .batch-button {
        @apply px-2;
        min-width: 40px;
        min-height: 40px;
    }

    .batch-toolbar {
        @apply px-3 py-2;
    }
}

/* Success/Error message styles */
.message-success {
    @apply bg-green-800/20 border border-green-700/50 text-green-400 px-4 py-3 rounded-lg;
    background: linear-gradient(
        135deg,
        rgba(34, 197, 94, 0.1) 0%,
        rgba(22, 163, 74, 0.05) 100%
    );
}

.message-error {
    @apply bg-red-800/20 border border-red-700/50 text-red-400 px-4 py-3 rounded-lg;
    background: linear-gradient(
        135deg,
        rgba(239, 68, 68, 0.1) 0%,
        rgba(220, 38, 38, 0.05) 100%
    );
}

/* Modern loading animations */

/* PWA specific styles */
@media (display-mode: standalone) {
    body {
        @apply safe-area-top;
    }
}

/* Dark mode specific adjustments */
@media (prefers-color-scheme: dark) {
    html {
        color-scheme: dark;
    }
}
